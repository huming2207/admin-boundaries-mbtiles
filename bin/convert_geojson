#!/bin/sh
cd tmp
ogr2ogr -f GeoJSONSeq -sql "select shp.LC_PLY_PID as LC_PLY_PID, shp.DT_CREATE as DT_CREATE, shp.LOC_PID as LOC_PID, NAME, POSTCODE, LOCCL_CODE, STATE_PID from ACT_LOCALITY_POLYGON_shp shp JOIN 'ACT_LOCALITY_shp.dbf'.\"ACT_LOCALITY_shp\" dbf ON dbf.LOC_PID = shp.LOC_PID AND dbf.LOCCL_CODE = 'G'" -t_srs crs:84 AUS.geojson ACT_LOCALITY_POLYGON_shp.shp
ogr2ogr -f GeoJSONSeq -sql "select shp.LC_PLY_PID as LC_PLY_PID, shp.DT_CREATE as DT_CREATE, shp.LOC_PID as LOC_PID, NAME, POSTCODE, LOCCL_CODE, STATE_PID from NSW_LOCALITY_POLYGON_shp shp JOIN 'NSW_LOCALITY_shp.dbf'.\"NSW_LOCALITY_shp\" dbf ON dbf.LOC_PID = shp.LOC_PID AND dbf.LOCCL_CODE = 'G'" -t_srs crs:84 NSW.geojson NSW_LOCALITY_POLYGON_shp.shp
ogr2ogr -f GeoJSONSeq -sql "select shp.LC_PLY_PID as LC_PLY_PID, shp.DT_CREATE as DT_CREATE, shp.LOC_PID as LOC_PID, NAME, POSTCODE, LOCCL_CODE, STATE_PID from NT_LOCALITY_POLYGON_shp shp JOIN 'NT_LOCALITY_shp.dbf'.\"NT_LOCALITY_shp\" dbf ON dbf.LOC_PID = shp.LOC_PID AND dbf.LOCCL_CODE = 'G'" -t_srs crs:84 NT.geojson NT_LOCALITY_POLYGON_shp.shp
ogr2ogr -f GeoJSONSeq -sql "select shp.LC_PLY_PID as LC_PLY_PID, shp.DT_CREATE as DT_CREATE, shp.LOC_PID as LOC_PID, NAME, POSTCODE, LOCCL_CODE, STATE_PID from OT_LOCALITY_POLYGON_shp shp JOIN 'OT_LOCALITY_shp.dbf'.\"OT_LOCALITY_shp\" dbf ON dbf.LOC_PID = shp.LOC_PID AND dbf.LOCCL_CODE = 'G'" -t_srs crs:84 OT.geojson OT_LOCALITY_POLYGON_shp.shp
ogr2ogr -f GeoJSONSeq -sql "select shp.LC_PLY_PID as LC_PLY_PID, shp.DT_CREATE as DT_CREATE, shp.LOC_PID as LOC_PID, NAME, POSTCODE, LOCCL_CODE, STATE_PID from QLD_LOCALITY_POLYGON_shp shp JOIN 'QLD_LOCALITY_shp.dbf'.\"QLD_LOCALITY_shp\" dbf ON dbf.LOC_PID = shp.LOC_PID AND dbf.LOCCL_CODE = 'G'" -t_srs crs:84 QLD.geojson QLD_LOCALITY_POLYGON_shp.shp
ogr2ogr -f GeoJSONSeq -sql "select shp.LC_PLY_PID as LC_PLY_PID, shp.DT_CREATE as DT_CREATE, shp.LOC_PID as LOC_PID, NAME, POSTCODE, LOCCL_CODE, STATE_PID from SA_LOCALITY_POLYGON_shp shp JOIN 'SA_LOCALITY_shp.dbf'.\"SA_LOCALITY_shp\" dbf ON dbf.LOC_PID = shp.LOC_PID AND dbf.LOCCL_CODE = 'G'" -t_srs crs:84 SA.geojson SA_LOCALITY_POLYGON_shp.shp
ogr2ogr -f GeoJSONSeq -sql "select shp.LC_PLY_PID as LC_PLY_PID, shp.DT_CREATE as DT_CREATE, shp.LOC_PID as LOC_PID, NAME, POSTCODE, LOCCL_CODE, STATE_PID from TAS_LOCALITY_POLYGON_shp shp JOIN 'TAS_LOCALITY_shp.dbf'.\"TAS_LOCALITY_shp\" dbf ON dbf.LOC_PID = shp.LOC_PID AND dbf.LOCCL_CODE = 'G'" -t_srs crs:84 TAS.geojson TAS_LOCALITY_POLYGON_shp.shp
ogr2ogr -f GeoJSONSeq -sql "select shp.LC_PLY_PID as LC_PLY_PID, shp.DT_CREATE as DT_CREATE, shp.LOC_PID as LOC_PID, NAME, POSTCODE, LOCCL_CODE, STATE_PID from VIC_LOCALITY_POLYGON_shp shp JOIN 'VIC_LOCALITY_shp.dbf'.\"VIC_LOCALITY_shp\" dbf ON dbf.LOC_PID = shp.LOC_PID AND dbf.LOCCL_CODE = 'G'" -t_srs crs:84 VIC.geojson VIC_LOCALITY_POLYGON_shp.shp
ogr2ogr -f GeoJSONSeq -sql "select shp.LC_PLY_PID as LC_PLY_PID, shp.DT_CREATE as DT_CREATE, shp.LOC_PID as LOC_PID, NAME, POSTCODE, LOCCL_CODE, STATE_PID from WA_LOCALITY_POLYGON_shp shp JOIN 'WA_LOCALITY_shp.dbf'.\"WA_LOCALITY_shp\" dbf ON dbf.LOC_PID = shp.LOC_PID AND dbf.LOCCL_CODE = 'G'" -t_srs crs:84 WA.geojson WA_LOCALITY_POLYGON_shp.shp
cat ACT.geojson NSW.geojson NT.geojson OT.geojson QLD.geojson SA.geojson TAS.geojson VIC.geojson WA.geojson > AUS.geojson
